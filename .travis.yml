language: python
python:
  - "2.7"
  - "3.5"
  - "3.5-dev" # 3.5 development branch
  - "3.6"
  - "3.6-dev" # 3.6 development branch
services:
  - docker
# command to install dependencies
addons:
  apt:
    packages:
        - libblas-dev
        - liblapack-dev
        - libatlas-base-dev
        - libopenblas-base
        - libopenblas-dev
        - gfortran
        - oracle-java8-set-default
        - maven
install:
  - pip install -r requirements.txt
  - pip install -r test_requirements.txt
before_install:
  - git clone https://github.com/saalfeldlab/render.git fcollman/render
  - mvn package -pl render-ws-java-client -am -DskipTests -f fcollman/render/pom.xml
  - export RENDER_CLIENT_JAR=`readlink -m $TRAVIS_BUILD_DIR/fcollman/render/render-ws-java-client/target/render-ws-java-client-*-standalone.jar`
  - export RENDER_EXAMPLE_DATA=`readlink -m $TRAVIS_BUILD_DIR/fcollman/render/render-ws-java-client/src/main/resources`
  - docker-compose up -d
  - ls $RENDER_EXAMPLE_DATA/example_1
env:
  - RENDER_HOST=localhost RENDER_PORT=8080 RENDER_CLIENT_SCRIPTS=$TRAVIS_BUILD_DIR/scripts
# command to run tests
script:
  - python setup.py test # or py.test for Python versions 3.5 and below
cache:                                                                          
  directories:                                                                  
    - $HOME/.m2